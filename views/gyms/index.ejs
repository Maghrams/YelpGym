<!-- All gyms page-->
<% layout('/layouts/boilerplate')%>
    <h1>All Gyms</h1>
    <div>
    <a href="/gyms/new">Insert new Gym</a>
    </div>

    <% for (let gym of allGyms){ %>
        <div class="card mb-3 " >
            <div class="row">
                <div class="col-md-4">
                    <img class="img-fluid" src="<%=gym.image%>">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card.title"><%=gym.name%></h5>
                        <p class="card-text"> <%= gym.totalReview.totalRating%></p>
                        <p class="card-test">
                            <small class="text-muted"> <%= gym.address.streetName%></small>
                        </p>
                        <a class="btn btn-primary" href="/gyms/<%=gym._id%>"> View <%=gym.name%></a>
                    </div>
                </div>
            </div>
        </div>
    <%}%>
<!-- FIXME why replace image not display, fix it-->
<script>
    window.addEventListener("load", event => {
        var image = document.querySelector('img');
        if(!(image.complete && image.naturalHeight !== 0)){
            image.src = "https://source.unsplash.com/collection/10043143"
            image.style.height = "200px"
            image.style.width = "400px"
        }
    });
</script>
